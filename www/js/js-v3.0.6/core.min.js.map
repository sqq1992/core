{"version":3,"sources":["core.clean.js"],"names":["Array","prototype","filter","fun","len","this","length","TypeError","res","thisp","arguments","i","val","call","push","forEach","action","that","n","Function","bind","oThis","aArgs","slice","fToBind","fNOP","fBound","apply","concat","String","trim","replace","map","callback","thisArg","T","A","k","O","Object","kValue","mappedValue","indexOf","elt","from","Number","Math","ceil","floor","window","app","version","load","cache","route","control","connect","util","_cache","addParams","type","params","hasOwnProperty","getParams","key","result","_","isUndefined","undefined","removeParams","isArray","config","o","$","_getJSONSingle","data","_data","JSON","stringify","_getJSONList","item","arr","clone","_getJSONLists","str","lastItem","temp","_filterAd","_getDataType","_type","size","adgroupId","_getUrlDataType","url","value","element","dataType","_url","isObject","api","_delQueue","ajQueue","elem","index","isEqual","splice","_whereQueue","_addQueue","jqXHR","success","obj","xhr","cb","_addQueueCb","ajax","udt","context","async","headers","X-HTTP-Method-Override","Accept","Content-Type","beforeSend","num","abort","json","sessionTimeout","location","href","error","setts","complete","socket","jQuery","addCache","status","reduceCache","getRender","getDestroy","getHas","updateModules","hashSearch","diffPath","modules","handler","_render","_destroy","_has","_temp","getHashSearchObj","fn","destroy","use","render","j","isUpdate","_dependence","dependence","update","win","_getGid","gid","getCurrentNode","document","currentScript","arrScript","getElementsByTagName","readyState","path","getCurrentPath","src","Error","repStr","doc","stack","a","b","c","e","opera","match","join","split","pop","node","querySelector","getAttribute","_loadJs","option","d","extend","charset","docCharset","createElement","id","idPrefix","onload","onerror","onreadystatechange","test","head","appendChild","getCurSrc","currentlyAddingScript","interactiveScript","scripts","script","isUrl","search","fixUrl","getUrl","rootUrl","lastIndexOf","fixSuffix","suffix","reg","RegExp","replacePath","ids","getDepUrl","pathId","baseUrl","getIdUrl","require","curExecModName","moduleMap","exports","fixPath","docUrl","BASEURL","DOCURL","execMod","modName","exp","modMap","execComplete","oncomplete","loadMod","isFunction","deps","depsCount","param","define","name","toString","commentRegExp","cjsRequireRegExp","dep","debug","getData","documentElement","PB","_storage","subscribe","types","functions","isString","unSubscribe","publish","constructor","get","pb","routes","mode","root","options","history","clearSlashes","add","re","mols","remove","flush","check","f","_path","getHashPath","_search","getSearchObj","listen","self","current","getHash","onhashchange","navigate","pushState","getHref","decodeURI","getProtocol","protocol","getHost","host","getHostName","hostname","getPort","encodeURI","port","getPathname","pathname","hash","getSearch","getAll","_hash","hashPath","setHref","setProtocol","setHost","setHostName","setPort","setPathname","setHash","setSearch","setHashSearch","object","hashArr","HASH","delHashSearch","arg","parseUrl","tmp","p","r","exec","isEqualHost","m","iO","jO","Stg","cookieExpires","isHasLocalStorage","localStorage","setItem","cookie","expires","getItem","del","parse","removeItem","storage"],"mappings":"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","file":"core.min.js","sourcesContent":["/**\n * @fileOverview\n * @author Crow\n * @version 0.0.1\n * @time 2016/2/24\n */\n\n\nif (!Array.prototype.filter) {\n    Array.prototype.filter = function(fun /*, thisp*/){\n        var len = this.length;\n        if (typeof fun != \"function\"){\n            throw new TypeError();\n        }\n        var res = new Array();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in this){\n                var val = this[i]; // in case fun mutates this\n                if (fun.call(thisp, val, i, this)) {\n                    res.push(val);\n                }\n            }\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.forEach) {\n    Array.prototype.forEach= function(action, that) {\n        for (var i= 0, n= this.length; i<n; i++)\n            if (i in this)\n                action.call(that, this[i], i, this);\n    };\n}\n\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n        if (typeof this !== \"function\") {\n            throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n        }\n        var aArgs = Array.prototype.slice.call(arguments, 1),\n            fToBind = this,\n            fNOP = function () {},\n            fBound = function () {\n                return fToBind.apply(this instanceof fNOP && oThis\n                        ? this\n                        : oThis,\n                    aArgs.concat(Array.prototype.slice.call(arguments)));\n            };\n        fNOP.prototype = this.prototype;\n        fBound.prototype = new fNOP();\n        return fBound;\n    };\n}\n\nif(!String.prototype.trim) {\n    String.prototype.trim = function() {\n        return this.replace(/^\\s+|\\s+$/g, '');\n    }\n}\n\n//http://stackoverflow.com/questions/18500942/array-map-function-not-supported-in-ie8-standards\nif (!Array.prototype.map) {\n    Array.prototype.map = function(callback, thisArg) {\n        var T, A, k;\n        if (this == null) {\n            throw new TypeError(\" this is null or not defined\");\n        }\n        var O = Object(this);\n        var len = O.length >>> 0;\n        if (typeof callback !== \"function\") {\n            throw new TypeError(callback + \" is not a function\");\n        }\n        if (thisArg) {\n            T = thisArg;\n        }\n        A = new Array(len);\n\n        k = 0;\n        while(k < len) {\n            var kValue, mappedValue;\n\n            if (k in O) {\n\n                kValue = O[ k ];\n                mappedValue = callback.call(T, kValue, k, O);\n                A[ k ] = mappedValue;\n            }\n            k++;\n        }\n        return A;\n    };\n}\n\n// http://www.cnblogs.com/JustRun1983/archive/2013/04/02/2996650.html\nif (!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function(elt /*, from*/)\n    {\n        var len = this.length >>> 0;\n\n        var from = Number(arguments[1]) || 0;\n        from = (from < 0)\n            ? Math.ceil(from)\n            : Math.floor(from);\n        if (from < 0)\n            from += len;\n\n        for (; from < len; from++)\n        {\n            if (from in this &&\n                this[from] === elt)\n                return from;\n        }\n        return -1;\n    };\n}\n/**\n * @fileOverview\n * @author Crow\n * @version 0.0.1\n * @time 2015/11/3\n */\n/*global _*/\n(function (window) {\n    'use strict';\n    var app = {\n        version: '3.0.6'\n    };\n    // 加载\n    app.load = {};\n    // 缓存\n    app.cache = {};\n    // 路由\n    app.route = {};\n    // 控制\n    app.control = {};\n    // 通信\n    app.connect = {};\n    // 公共方法\n    app.util = {};\n\n    window.app = app;\n}(window));\n/**\n * Created by Crow on 2014/9/25.\n *\n * QC._cache 缓存区\n *\n * QC.cache 有三个方法\n * addParams : 向缓存区增加参数\n * getParams : 从缓存区获得参数\n * removeParams : 从缓存区删除参数\n */\n/*global jQuery, app, _*/\n(function (app) {\n    'use strict';\n    app = app || {};\n\n\n    /*变量缓存区*/\n    var _cache = {};\n\n    app._cache = _cache;\n    app.cache = {\n        addParams: function (type, params) {\n            if (arguments.length === 1) {\n                params = arguments[0];\n                type = 'request';\n            }\n            var i = 0;\n            _cache[type] = !_cache[type] ? {} : _cache[type];\n            for (i in params) {\n                if (params.hasOwnProperty(i)) {\n                    _cache[type][i] = params[i];\n                }\n            }\n        },\n        getParams: function (type, key) {\n            if (arguments.length === 1) {\n                key = arguments[0];\n                type = 'request';\n            }\n            var result = null;\n            if (_.isUndefined(key)) {\n                result = _cache[type];\n            } else {\n                result = _.isUndefined(_cache[type]) ? undefined : _.isUndefined(_cache[type][key]) ? undefined : _cache[type][key];\n            }\n            return result;\n        },\n        removeParams: function (type, params) {\n            if (arguments.length === 1) {\n                params = arguments[0];\n                type = 'request';\n            }\n            var i = 0;\n            if (_.isUndefined(_cache[type])) {\n                return 0;\n            }\n            if (params === 'all') {\n                for (i in _cache[type]) {\n                    if (_cache[type].hasOwnProperty(i)) {\n                        delete _cache[type][i];\n                    }\n                }\n            } else {\n                if (!_.isArray(params)) {\n                    params = [params];\n                }\n                for (i in params) {\n                    if (params.hasOwnProperty(i)) {\n                        delete _cache[type][params[i]];\n                    }\n                }\n            }\n        }\n    };\n}(app));\n/**\n * @fileOverview\n * @author Crow\n * @version 0.0.1\n * @time 2015/11/20\n */\n/*global quiCloud*/\n(function (app) {\n\n    var _config = {\n\n    };\n\n\n    app.config = function(o) {\n\n    }\n\n}(app));\n/**\n * Created by Crow on 2014/9/25.\n * Updated by Crow on 2015-1-22 10:20:33.\n * 加入 ajax 请求数组，解决 hashChange 时，停止之前相同的 ajax请求，\n * Updated by Crow on 2015-1-22 14:40:20.\n * Updated by Crow on 2015年10月13日19:59:15\n * 代码重构\n */\n\n/*global jQuery, app, window, monitor, _, console*/\n(function ($, app) {\n    'use strict';\n    app = app || {};\n    /**\n     * params : {type, api, data, beforeSend, success, error, complete}\n     * params : {\n     *      type : get/post,\n     *      api : name,\n     *      data : ['param1', 'param2', 'param3'...],\n     *      isRepeat: false,    // 是否重复请求\n     *      beforeSend : function(){},\n     *      success : function(){},\n     *      error : function(){},\n     *      complete : function(){}\n     * }\n     *\n     * */\n\n    /**\n     * Updated by Crow on 2015-1-22 10:20:33.\n     * 使用 ajQueue 在 beforeSend 记录当前请求信息，在 complete 删除对应的请求信息，\n     * 当在相同的请求多次发送时，abort 前一个请求，解决页面重复请求或者 hash 值改变出现之前请求返回问题。\n     * */\n\n    /**\n     * Updated by Crow on 2015-1-22 14:42:07.\n     * 加入过滤添加，exceptUrl 数据包含不需要处理重复提交 ajax 类型，去掉过滤\n     * */\n    var ajQueue = [];\n    //var exceptUrl = [];\n\n\n    /**\n     * @desc 获得简单的JSON字符串\n     * @param data\n     * @private\n     */\n    function _getJSONSingle(data) {\n        var _data = data || '';\n        return JSON.stringify(_data);\n    }\n\n\n    /**\n     * @desc 获得面向后端LIST风格的JSON字符串, 其中含有一个参数值为数组\n     * @param data\n     * @private\n     */\n    function _getJSONList(data) {\n        var item, arr, n;\n        var result = [];\n        for (item in data) {\n            if (data.hasOwnProperty(item)) {\n                if (_.isArray(data[item])) {\n                    arr = data[item];\n                    for (n = 0; n < arr.length; n++) {\n                        data[item] = arr[n];\n                        result.push(_.clone(data));\n                    }\n\n                    if (arr.length === 0) {\n                        data[item] = '';\n                        result.push(_.clone(data));\n                    }\n                    delete data[item];\n                }\n            }\n        }\n        return JSON.stringify(result);\n    }\n\n    /**\n     * @desc 获得面向后端LIST风格的JSON字符串, 其中含有一个以及以上参数值为数组\n     * @param data\n     * @private\n     */\n    function _getJSONLists(data) {\n        var item, str, lastItem, n;\n        var temp = {};\n        var result = [];\n        //先将对象中的多个数据存入 temp 对象中\n        for (item in data) {\n            if (data.hasOwnProperty(item)) {\n                if (_.isArray(data[item])) {\n                    temp[item] = data[item];\n                    lastItem = item;\n                }\n            }\n        }\n\n        //遍历temp任意一个数据，这里遍历最后一个数据元素，在遍历对象中的元素，组合成 data 单数据元素，最后 push 到 adgroupIdArr 数组里面\n        for (n = 0; n < temp[lastItem].length; n++) {\n            for (str in temp) {\n                if (temp.hasOwnProperty(str)) {\n                    data[str] = temp[str][n];\n                    if (temp[lastItem].length === 0) {\n                        data[str] = '';\n                    }\n                }\n\n            }\n            result.push(_.clone(data));\n\n        }\n        return JSON.stringify(result);\n    }\n\n    /**\n     * @desc 躲避浏览器广告插件\n     * @param str\n     * @return {string}\n     * @private\n     */\n    function _filterAd(str) {\n        var result = str || '';\n        return result.replace(/adgroup/g, 'ddgroup');\n    }\n\n\n    /**\n     * TODO 统一把arr改成list\n     * @desc 根据数据和类型，返回可传输数据和协议\n     * @param data\n     * @param type\n     * @return {{}}\n     * @private\n     */\n    function _getDataType(data, type) {\n        var _type;\n        var _data = data || {};\n        var result = {};\n        if (_.size(_data) > 0) {\n            switch (type) {\n            case 'post':adgroupId\n                _type = 'post';\n                _data = _getJSONSingle(_data);\n                break;\n            case 'delete':\n                _type = 'delete';\n                _data = _getJSONSingle(_data);\n                break;\n            case 'put':\n                _type = 'put';\n                _data = _getJSONSingle(_data);\n                break;\n            case 'post-arr':\n                _type = 'post';\n                _data = _getJSONList(_data);\n                break;\n            case 'delete-arr':\n                _type = 'delete';\n                _data = _getJSONList(_data);\n                break;\n            case 'put-arr':\n                _type = 'put';\n                _data = _getJSONList(_data);\n                break;\n            case 'post-arrs':\n                _type = 'post';\n                _data = _getJSONLists(_data);\n                break;\n            case 'delete-arrs':\n                _type = 'delete';\n                _data = _getJSONLists(_data);\n                break;\n            case 'put-arrs':\n                _type = 'put';\n                _data = _getJSONLists(_data);\n                break;\n            }\n        }\n\n        result.type = _type;\n        result.data = _data;\n        return result;\n    }\n\n\n    /**\n     * @desc 处理参数，由于接口是采用rest风格，所以这里有一部分处理api中参数\n     *      支持data从缓存中取或者直接赋值\n     * @param url {String}\n     * @param arr {Array}\n     * @param type {String}\n     * @return {{url: *, data: {}, type: String}}\n     * @private\n     */\n    function _getUrlDataType(url, data, type) {\n        var i, temp, value, element, dataType;\n        var len;\n        var _data = {};\n        var _url = url;\n\n        if (_.isArray(data)) {\n            len = data.length;\n            // 判断是否有参数\n            if (len > 0) {\n                for (i = 0; i < len; i++) {\n                    element = data[i];\n                    value = app.cache.getParams('request', element);\n\n                    // 判断参数是否有值\n                    if (value !== 'undefined') {\n\n                        // TODO 这个方法可以提出\n                        // 处理url中的参数，否则放到json中\n                        if (_url.indexOf('{' + element + '}') >= 0) {\n                            _url = _url.replace('{' + element + '}', value);\n                        } else {\n                            /*\n                             * Updated by Crow on 2015年4月7日15:22:56\n                             * 躲避浏览器广告拦截插件\n                             * */\n                            if (element.indexOf('adgroup') >= 0 && type === 'get') {\n                                temp = _filterAd(data[i]);\n                                _data[temp] = value;\n                            } else {\n                                _data[element] = value;\n                            }\n\n                        }\n                    }\n                }\n            }\n        } else if (_.isObject(data)) {\n            for (i in data) {\n                if (data.hasOwnProperty(i)) {\n                    element = data[i];\n                    if (_url.indexOf('{' + i + '}') >= 0) {\n                        _url = _url.replace('{' + i + '}', element);\n                    } else {\n                        /*\n                         * Updated by Crow on 2015年4月7日15:22:56\n                         * 躲避浏览器广告拦截插件\n                         * */\n                        if (i.indexOf('adgroup') >= 0 && type === 'get') {\n                            temp = _filterAd(i);\n                            _data[temp] = data[i];\n                        } else {\n                            _data[i] = data[i];\n                        }\n\n                    }\n                }\n            }\n        }\n\n        dataType = _getDataType(_data, type);\n\n        _data = dataType.data || '';\n        type = dataType.type || type || 'get';\n\n        // 目前只屏蔽get请求的广告拦截\n        _url = _filterAd(_url);\n\n        return {api: _url, data: _data, type: type};\n    }\n\n\n    /**\n     * 删除对应的请求\n     * @param cb\n     * @private\n     */\n    function _delQueue(params) {\n        // 相同请求，abort() 之前请求并删除队列对应存储\n        ajQueue.forEach(function (elem, index) {\n            // update by dyy 增加 data 判断，有时候需要两个相同的 ajax 请求，但是 data 参数值不一样\n            if (elem && elem.api === params.api && _.isEqual(elem.data, params.data) && elem.type === params.type) {\n                ajQueue.splice(index, 1);\n                return false;\n            }\n        });\n    }\n\n\n    /**\n     * 判断队列中是否有相同的请求，并返回位置\n     * @param params\n     * @returns {number}\n     * @private\n     */\n    function _whereQueue(params) {\n        var result = -1;\n        // 相同请求，abort() 之前请求并删除队列对应存储\n        ajQueue.forEach(function (elem, index) {\n            // update by dyy 增加 data 判断，有时候需要两个相同的 ajax 请求，但是 data 参数值不一样\n            if (elem && elem.api === params.api && _.isEqual(elem.data, params.data) && elem.type === params.type) {\n                result = index;\n            }\n        });\n        return result;\n    }\n\n    /**\n     * 加入队列中\n     * @param params\n     * @param cb\n     * @private\n     */\n    function _addQueue(jqXHR, params, success) {\n        var obj = {\n            'xhr': jqXHR,\n            'data': params.data,\n            'api': params.api,\n            'type': params.type,\n            'cb': []\n        };\n        if (success) {\n            obj.cb = [success];\n        }\n        ajQueue.push(obj);\n    }\n\n    /**\n     * 加入回调队列\n     * @param index\n     * @param cb\n     * @private\n     */\n    function _addQueueCb(index, cb) {\n        ajQueue[index].cb.push(cb);\n    }\n\n    /**\n     * @desc 调用后端统一接口\n     * @param params\n     */\n    app.connect.ajax = function (params) {\n        var cache = true;\n        // udt: url data type\n        var udt = _getUrlDataType(params.api, params.data, params.type);\n\n        if (udt.type === 'get') {\n            cache = false;\n        }\n\n        $.ajax({\n            type: udt.type,                         //String，默认：get, HTTP请求方法\n            url: udt.api,                           //String，发送请求地址\n            context: params.context,\n            data: udt.data,                         //Object/String,发送到服务器的数据\n            dataType: 'json',                       //String，预期服务器返回的数据类型\n            async: params.async || true,            //Boolean, 默认，true，是否异步\n            headers: {\n                'X-HTTP-Method-Override': udt.type,\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            cache: cache,                           //Boolean，默认：true,是否从浏览器缓存中加载请求信息\n            beforeSend: function (jqXHR) {\n\n                // 检查队列中是否有这个请求\n                var num = _whereQueue(udt);\n                if (num != -1) {\n                    _addQueueCb(num, params.success);\n                    \n                    jqXHR.abort();\n                } else {\n                    _addQueue(jqXHR, udt, params.success);\n                }\n\n                if (params.beforeSend) {\n                    params.beforeSend();\n                }\n            },//Function，参数：XMLHttpRequest 发送请求前执行\n            success: function (json) {\n                //var sThis = this;\n                // session超时跳转\n                if (json.sessionTimeout) {\n                    window.location.href = \"/www/home/index.html\";\n                    return;\n                }\n                var num = _whereQueue(udt);\n                ajQueue[num].cb.forEach(function (elem) {\n                    if (elem) {\n                        elem(json);\n                    }\n                });\n            },//Function，参数：data,textStatus  请求成功后回调函数\n            error: function (error, setts) {\n                if (params.error) {\n                    params.error(error, setts);\n                }\n            },//Function，参数:XMLHttpRequest, textStatus, errorThrown\n            complete: function (jqXHR) {\n                // 完成删除队列请求\n                _delQueue(udt);\n                if (params.complete) {\n                    params.complete(jqXHR);\n                }\n            }\n        });\n    };\n\n    app.connect.socket = {\n\n    };\n\n}(jQuery, app));\n\n/**\n * Created by Crow on 2014/9/26.\n * app.control 组件控制模块\n */\n\n/*global jQuery, app, _*/\n(function (app) {\n    'use strict';\n    //初始化control\n    app = app || {};\n\n    var _cache = null;\n\n    function addCache(arr) {\n        var n;\n        _cache = _cache || {};\n        for (n = 0; n < arr.length; n++) {\n            _cache[arr[n]] = _cache[arr[n]] || {};\n            _cache[arr[n]].status = 1;\n        }\n    }\n\n    function reduceCache(arr) {\n        var n;\n        _cache = _cache || {};\n        for (n = 0; n < arr.length; n++) {\n            delete _cache[arr[n]];\n        }\n    }\n\n    function getRender(arr) {\n        var n;\n        var result = [];\n        if (!_cache) {\n            return arr;\n        }\n\n        _cache = _cache || {};\n        for (n = 0; n < arr.length; n++) {\n            if (_cache[arr[n]] === undefined) {\n                result.push(arr[n]);\n            }\n        }\n        return result;\n    }\n\n    function getDestroy(arr) {\n        var i;\n        var result = [];\n        if (!_cache) {\n            return result;\n        }\n\n        _cache = _cache || {};\n        for (i in _cache) {\n            if (_cache.hasOwnProperty(i)) {\n                if (_.indexOf(arr, i) < 0) {\n                    result.push(i);\n                }\n            }\n        }\n        return result;\n    }\n\n    function getHas(arr) {\n        var n;\n        var result = [];\n        if (!_cache) {\n            return result;\n        }\n\n        _cache = _cache || {};\n        for (n = 0; n < arr.length; n++) {\n            if (_cache[arr[n]]) {\n                result.push(arr[n]);\n            }\n        }\n        return result;\n    }\n\n    app.control = {\n        updateModules: function (route, hashSearch, diffPath) {\n            var arr = route.modules;\n            var cb = route.handler;\n            var _render = getRender(arr);\n            var _destroy = getDestroy(arr);\n            var _has = getHas(arr);\n            var _temp = app.url.getHashSearchObj();\n\n            // 如果路径没有改变，则不删除全部的参数\n            if (diffPath) {\n                app.cache.removeParams('all');\n                cb();\n            }\n\n            app.cache.addParams(_temp);\n\n            //销毁\n            if (_destroy.length) {\n                _destroy.forEach(function (elem) {\n                    if (_cache[elem].status) {\n                        _cache[elem].fn.destroy();\n                        //delete _cache[elem];\n                    }\n                });\n            }\n\n            //初次渲染模块\n            app.load.use(_render, function () {\n                var i;\n                for (i in arguments) {\n                    if (arguments.hasOwnProperty(i)) {\n                        _cache[_render[i]] = _cache[_render[i]] || {};\n                        if (!_cache[_render[i]].fn) {\n                            _cache[_render[i]].fn = new arguments[i];\n                        }\n                        _cache[_render[i]].fn.render();\n                    }\n                }\n            });\n\n            //更新\n            if (_has.length) {\n                app.load.use(_has, function () {\n                    var i, j, str, isUpdate;\n                    var _dependence = [];\n                    for (i in arguments) {\n                        if (arguments.hasOwnProperty(i)) {\n                            isUpdate = false;\n                            if (_.isArray(_cache[_has[i]].fn.dependence)) {\n                                for (j = 0; j < _cache[_has[i]].fn.dependence.length; j++) {\n\n                                    str = _cache[_has[i]].fn.dependence[j];\n\n                                    // 是否有依赖参数、是否有搜索参数、是否等于上一次、这个参数是否在依赖参数里面\n                                    if (_cache[_has[i]].fn.dependence && (!hashSearch || hashSearch[str] !== _temp[str]) && _.indexOf(_cache[_has[i]].fn.dependence, str) > -1) {\n                                        isUpdate = true;\n                                        _dependence.push(str);\n                                    }\n                                }\n                            }\n\n                            if (_cache[_has[i]].fn.dependence === 'hash') {\n                                isUpdate = true;\n                            }\n\n                            if (isUpdate) {\n                                _cache[_has[i]].fn.update(_dependence);           // 更新模块\n                            }\n                        }\n                    }\n                });\n            }\n\n            // 这边先执行\n            addCache(_render);\n            reduceCache(_destroy);\n        },\n        load: function (route, hashSearch, diffPath) {\n            if (route) {\n                this.updateModules(route, hashSearch, diffPath);\n            }\n        }\n    };\n\n}(app));\n/*global window, _*/\n(function (app, win) {\n    'use strict';\n    app = app || {};\n\n    var modMap = {};\n    var moduleMap = {};\n\n    var slice = [].slice;\n\n    var doc = document;\n    var head = doc.head || doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\n    var docCharset = doc.charset;\n    var docUrl = location.href.split('?')[0];//去除问号之后部分\n    var baseUrl = docUrl;\n\n    var gid = 0;\n    var commentRegExp = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n    var cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^'\"\\s]+)[\"']\\s*\\)/g;\n    var interactiveScript = null;\n    var currentlyAddingScript = null;\n    var curExecModName = null;\n\n    var idPrefix = 'load-js-';\n\n    var o = {};\n\n    function _getGid() {\n        return gid++;\n    }\n\n\n    /**\n     * 处理类似IE11问题\n     * http://www.cnblogs.com/diligenceday/p/4504160.html\n     * @returns {*}\n     */\n    function getCurrentNode() {\n        if (document.currentScript) {\n            return document.currentScript\n        }\n        var arrScript = document.getElementsByTagName(\"script\");\n        var len = arrScript.length;\n        for(var i= 0; i<len; i++) {\n            if(arrScript[i].readyState === \"interactive\") {\n                return arrScript[i];\n            }\n        }\n\n        //IE11的特殊处理;\n        var path = getCurrentPath();\n        for(var i= 0; i<len; i++) {\n            if(path.indexOf(arrScript[i].src)!==-1) {\n                return arrScript[i];\n            }\n        }\n        throw new Error(\"getCurrentNode error\");\n    }\n\n    function getCurrentPath() {\n        var repStr = function(str) {\n            return (str || \"\").replace(/[\\&\\?]{1}[\\w\\W]+/g,\"\") || \"\";\n        };\n        if (doc.currentScript) {\n            return repStr(doc.currentScript.src);\n        }\n\n        //IE11没有了readyState属性， 也没有currentScript属性;\n        // 参考 https://github.com/samyk/jiagra/blob/master/jiagra.js\n        var stack;\n        try {\n            a.b.c() //强制报错,以便捕获e.stack\n        } catch (e) { //safari的错误对象只有line,sourceId,sourceURL\n            stack = e.stack\n            if (!stack && window.opera) {\n                //opera 9没有e.stack,但有e.Backtrace,但不能直接取得,需要对e对象转字符串进行抽取\n                stack = (String(e).match(/of linked script \\S+/g) || []).join(\" \")\n            }\n        }\n        if (stack) {\n            /**e.stack最后一行在所有支持的浏览器大致如下:\n             *chrome23:\n             *firefox17:\n             *opera12:http://www.oldapps.com/opera.php?system=Windows_XP\n             *IE10:\n             * //firefox4+ 可以用document.currentScript\n             */\n            stack = stack.split(/[@ ]/g).pop(); //取得最后一行,最后一个空格或@之后的部分\n            stack = stack[0] === \"(\" ? stack.slice(1, -1) : stack.replace(/\\s/, \"\"); //去掉换行符\n            return stack.replace(/(:\\d+)?:\\d+$/i, \"\"); //去掉行号与或许存在的出错字符起始位置\n        }\n        //实在不行了就走这里;\n        var node = getCurrentNode();\n        //IE>=8的直接通过src可以获取，IE67要通过getAttriubte获取src;\n        return repStr(document.querySelector ? node.src : node.getAttribute(\"src\", 4)) || \"\";\n\n        throw new Error(\"getCurrentPath error!\");\n    }\n\n    function _loadJs(src, success, error, option) {\n        var d = _.extend({\n            charset: docCharset\n        }, option);\n        var node = doc.createElement('script');\n        node.src = src + '?' + app.version;\n        node.id = idPrefix + _getGid();\n        node.charset = d.charset;\n        if ('onload' in node) {\n            node.onload = success;\n            node.onerror = error;\n        } else {\n            node.onreadystatechange = function () {\n                if (/loaded|complete/.test(node.readyState)) {\n                    success();\n                }\n            };\n        }\n        //currentlyAddingScript = node;\n        head.appendChild(node);\n    }\n\n    function getCurSrc() {\n        if (doc.currentScript) {\n            return doc.currentScript.src;\n        }\n        if (currentlyAddingScript) {\n            return currentlyAddingScript.src;\n        }\n        // For IE6-9 browsers, the script onload event may not fire right\n        // after the script is evaluated. Kris Zyp found that it\n        // could query the script nodes and the one that is in \"interactive\"\n        // mode indicates the current script\n        // ref: http://goo.gl/JHfFW\n        if (interactiveScript && interactiveScript.readyState === \"interactive\") {\n            return interactiveScript.src;\n        }\n\n        var scripts = head.getElementsByTagName(\"script\");\n        for (var i = scripts.length - 1; i >= 0; i--) {\n            var script = scripts[i];\n            if (script.readyState === \"interactive\") {\n                interactiveScript = script;\n                return interactiveScript.src;\n            }\n        }\n\n        return getCurrentPath();\n    }\n\n    function isUrl(url) {\n        return url.search(/^(http:\\/\\/|https:\\/\\/|\\/\\/)/) !== -1;\n    }\n\n    function fixUrl(url) {\n        return url.replace(/([^:])\\/+/g, '$1/');\n    }\n\n    function getUrl(path, url) {\n        //绝对网址\n        if (isUrl(path)) {\n            return fixUrl(path);\n        }\n\n        var rootUrl;\n        //修复url\n        if (rootUrl = url.match(/[^\\/]*\\/\\/[^\\/]*\\//)) {\n            //http://yanhaijing.com/abc\n            url = url.slice(0, url.lastIndexOf('/') + 1);\n            rootUrl = rootUrl[0];\n        } else {\n            //http://yanhaijing.com\n            rootUrl = url = url + '/';\n        }\n\n        // /开头\n        if (path.search(/^\\//) !== -1) {\n            return fixUrl(rootUrl + path);\n        }\n\n        // ../开头\n        if (path.search(/^\\.\\.\\//) !== -1) {\n            while (path.search(/^\\.\\.\\//) !== -1) {\n                if (url.lastIndexOf('/', url.length - 2) !== -1) {\n                    path = path.slice(3);\n                    url = url.slice(0, url.lastIndexOf('/', url.length - 2) + 1);\n                } else {\n                    throw new Error('url错误');\n                }\n            }\n\n            return fixUrl(url + path);\n        }\n        // ./\n        path = path.search(/^\\.\\//) !== -1 ? path.slice(2) : path;\n\n        return fixUrl(url + path);\n    }\n\n    function fixSuffix(url, suffix) {\n        var reg = new RegExp('\\\\.' + suffix + '$', 'i');\n        return url.search(reg) !== -1 ? url : url + '.' + suffix;\n    }\n\n    function  replacePath(id) {\n        var ids = id.split('/');\n        // id中不包含路径 并 查找路径失败\n        if (ids.length < 2 && !(ids[0] in o.path)) {\n            return id;\n        }\n        ids[0] = o.path[ids[0]];\n        return ids.join('/');\n    }\n\n    function getDepUrl(id, url) {\n        var pathId = replacePath(id);\n        //找到path 基于baseUrl\n        if (pathId !== id) {\n            url = o.baseUrl;\n        }\n        return fixSuffix(getUrl(pathId, url || o.baseUrl), 'js');\n    }\n\n    function getIdUrl(id) {\n        //没有id的情况\n        if (!id) {\n            return getCurSrc();\n        }\n        //id不能为相对路径,amd规定此处也不能带后缀，此处放宽限制。\n        if (id.search(/^\\./) !== -1) {\n            throw new Error('资源路径：' + id + '必须是绝对定位');\n        }\n        return fixSuffix(getUrl(id, o.baseUrl), 'js');\n    }\n\n    function require(id, url) {\n        var url = getDepUrl(id, url || curExecModName);\n        return moduleMap[url] && moduleMap[url].exports;\n    }\n\n    function fixPath(path) {\n        //path是网址\n        if (isUrl(path)) {\n            return getUrl('./', path).slice(0, -1);\n        }\n        return path;\n    }\n\n    function config(option) {\n        if (!_.isObject(option)) {\n            return _.extend({}, o);\n        }\n\n        //处理baseUrl\n        if (option.baseUrl) {\n            option.baseUrl = getUrl(option.baseUrl, docUrl);\n        }\n\n        //处理path\n        if (_.isObject(option.path)) {\n            for (var key in option.path) {\n                option.path[key] = fixPath(option.path[key]);\n            }\n        }\n        o = _.extend(o, option);\n\n        //fix keywords\n        o.path.BASEURL = fixPath(option.baseUrl || o.baseUrl);\n        o.path.DOCURL = fixPath(docUrl);\n        return _.extend({}, o);\n    }\n\n    function execMod(modName, callback, params) {\n        //判断定义的是函数还是非函数\n        if (!params) {\n            moduleMap[modName].exports = modMap[modName].callback;\n        } else {\n            curExecModName = modName;\n            //commonjs\n            var exp = modMap[modName].callback.apply(null, params);\n            curExecModName = null;\n            //amd和返回值的commonjs\n            if (exp) {\n                moduleMap[modName].exports = exp;\n            }\n        }\n        //执行回调函数\n        callback(moduleMap[modName].exports);\n\n        //执行complete队列\n        execComplete(modName);\n    }\n\n    function execComplete(modName) {\n        //模块定义完毕 执行load函数,当加载失败时，会不存在module\n        for (var i = 0; i < modMap[modName].oncomplete.length; i++) {\n            modMap[modName].oncomplete[i](moduleMap[modName] && moduleMap[modName].exports);\n        }\n        //释放内存\n        modMap[modName].oncomplete = [];\n    }\n\n    function loadMod(id, callback, option) {\n        //commonjs\n        if (id === 'require') {\n            callback(require);\n            return -1;\n        }\n        if (id === 'exports') {\n            var exports = moduleMap[option.baseUrl].exports = null;\n            callback(exports);\n            return -2;\n        }\n        if (id === 'module') {\n            callback(moduleMap[option.baseUrl]);\n            return -3;\n        }\n        var modName = getDepUrl(id, option.baseUrl);\n        //未加载\n        if (!modMap[modName]) {\n            modMap[modName] = {\n                status: 'loading',\n                oncomplete: []\n            };\n            //\n            _loadJs(modName, function () {\n                if (!_.isFunction(modMap[modName].callback)) {\n                    execMod(modName, callback);\n                    return 0;\n                }\n                //\n                //define的是函数\n                use(modMap[modName].deps, function () {\n                    execMod(modName, callback, slice.call(arguments, 0));\n                }, {baseUrl: modName});\n                return 1;\n            }, function () {\n                modMap[modName].status = 'error';\n                callback();\n                execComplete(modName);//加载失败执行队列\n            });\n            return 0;\n        }\n\n        //加载失败\n        if (modMap[modName].status === 'error') {\n            callback();\n            return 1;\n        }\n        //正在加载\n        if (modMap[modName].status === 'loading') {\n            modMap[modName].oncomplete.push(callback);\n            return 1;\n        }\n\n        //加载完成\n        //尚未执行完成\n        if (!moduleMap[modName].exports) {\n            //如果define的不是函数\n            if (!_.isFunction(modMap[modName].callback)) {\n                execMod(modName, callback);\n                return 2;\n            }\n\n            //define的是函数\n            use(modMap[modName].deps, function () {\n                execMod(modName, callback, slice.call(arguments, 0));\n            }, {baseUrl: modName});\n            return 3;\n        }\n\n        //已经执行过\n        callback(moduleMap[modName].exports);\n        return 4;\n    }\n\n    function use(deps, callback, option) {\n        if (arguments.length < 2) {\n            throw new Error('load.use arguments miss');\n            return 0;\n        }\n\n        if (typeof deps === 'string') {\n            deps = [deps];\n        }\n\n        if (!_.isArray(deps) || !_.isFunction(callback)) {\n            throw new Error('load.use arguments type error');\n            return 1;\n        }\n        //默认为当前脚本的路径或baseurl\n        if (!_.isObject(option)) {\n            option = {};\n        }\n        option.baseUrl = option.baseUrl || o.baseUrl;\n\n        if (deps.length === 0) {\n            callback();\n            return 2;\n        }\n        var depsCount = deps.length;\n        var params = [];\n        for (var i = 0; i < deps.length; i++) {\n            (function (j) {\n                loadMod(deps[j], function (param) {\n                    depsCount--;\n                    params[j] = param;\n                    if (depsCount === 0) {\n                        callback.apply(null, params);\n                    }\n                }, option);\n            }(i));\n        }\n\n        return 3;\n    }\n\n    function define(name, deps, callback) {\n        //省略模块名\n        if (typeof name !== 'string') {\n            callback = deps;\n            deps = name;\n            name = null;\n        }\n\n        //无依赖\n        if (!_.isArray(deps)) {\n            callback = deps;\n            deps = [];\n        }\n\n        //支持commonjs\n        if (deps.length === 0 && _.isFunction(callback)) {\n            callback\n                .toString()\n                .replace(commentRegExp, '')\n                .replace(cjsRequireRegExp, function (match, dep) {\n                    deps.push(dep);\n                });\n            var arr = ['require'];\n            if (callback.length > 1) {\n                arr.push('exports');\n            }\n            if (callback.length > 2) {\n                arr.push('module');\n            }\n            deps = arr.concat(deps);\n        }\n\n        var modName = getIdUrl(name).split('?')[0];//fix 后缀\n        modMap[modName] = modMap[modName] || {};\n        modMap[modName].deps = deps;\n        modMap[modName].callback = callback;\n        modMap[modName].status = 'loaded';\n        modMap[modName].oncomplete = modMap[modName].oncomplete || [];\n        moduleMap[modName] = {};\n\n        return 0;\n    }\n\n    function debug() {\n        \n    }\n\n    function getData() {\n        return o;\n    }\n\n    var load = {\n        use: use,\n        _loadJs: _loadJs,\n        config: config,\n        define: define,\n        require: require,\n        debug: debug,\n        getData: getData\n    };\n\n    load.config({\n        baseUrl: baseUrl,\n        path: {}\n    });\n    win.define = define;\n    app.load = load;\n}(app, window));\n\n/**\n * Created by Crow on 2014/9/25.\n */\n/*global quiCloud*/\n(function (app) {\n    'use strict';\n    app = app || {};\n    app.modules = {};\n}(app));\n/**\n * @fileOverview\n * @author Crow\n * @version 0.0.1\n * @time 2015/11/11\n */\n\n\n/*global app, _, console*/\n(function (app) {\n    'use strict';\n\n    /**\n     * @desc 盒子\n     * @type {Object}\n     */\n    var PB = {};\n\n    /**\n     * @desc 存储 不公开\n     * @type {Object}\n     */\n    var _storage = {};\n\n    /**\n     * @desc 订阅者（观察者）\n     * @param  {String|Array}   types     订阅类型\n     * @param  {Function|Array} functions 订阅者\n     * @return {void}\n     */\n    PB.subscribe = function (types, functions) {\n        if (_.isString(types)) {\n            types = [types];\n        }\n        if (_.isFunction(functions)) {\n            functions = [functions];\n        }\n\n        types.forEach(function (name) {\n            if (!_storage[name]) {\n                _storage[name] = [];\n            }\n            functions.forEach(function (fn) {\n                if (_.isFunction(fn)) {\n                    _storage[name].push(fn);\n                }\n            });\n        });\n    };\n\n    /**\n     * @desc 取消订阅\n     * @param  {String|Array}   types     订阅的类型\n     * @param  {Function|Array} functions 订阅者\n     * @return {void}\n     */\n     // TODO unSubscribe 一个单词 unsubscribe\n    PB.unSubscribe = function (types, functions) {\n        var index;\n\n        if (_.isString(types)) {\n            types = [types];\n        }\n        if (_.isFunction(functions)) {\n            functions = [functions];\n        }\n\n        types.forEach(function (name) {\n            if (!_storage[name]) {\n                \n            } else {\n                if (functions) {\n                    functions.forEach(function(fn) {\n                        index = _storage[name].indexOf(fn);\n                        _storage[name].splice(index, 1);\n                    });\n                } else {\n                    _storage[name] = [];\n                }\n            }\n        });\n    };\n\n    /**\n     * @desc 订阅(被观察者)\n     * @param  {String|Array} types 类型\n     * @param  {Object}       data  数据\n     * @return {void}\n     */\n    PB.publish = function (types, data) {\n\n        if (_.isString(types)) {\n            types = [types];\n        }\n\n        types.forEach(function (name) {\n            if (!_storage[name] || _storage[name].constructor !== Array) {\n                _storage[name] = [];\n            }\n\n            _storage[name].forEach(function (fn) {\n                fn(data);\n            });\n        });\n    };\n\n    PB.get = function () {\n        return _storage;\n    };\n\n    app.pb = PB;\n}(app, _));\n/**\n *\n * Created by Crow on 2014/9/27.\n *\n * Recently by Crow on 2014/12/22.\n *\n */\n\n/*global app, _hmt, _, window, console*/\n(function (app) {\n    'use strict';\n    app = app || {};\n\n    app.route = {\n        cb: null,\n        routes: {},     //缓存以保存当前已经注册的路由\n        mode: null,     //取值有两项： hash和history，用来判断是否使用history URL_PATH\n        root: '/',      //应用的根路径\n        config: function (options) {\n            this.cb = options.cb;\n            this.mode = options && options.mode && options.mode === 'history' && !!(window.history.pushState) ? 'history' : 'hash';\n            this.root = options && options.root ? '/' + this.clearSlashes(options.root) + '/' : '/';\n            return this;\n        },\n        clearSlashes: function (path) {\n            return path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n        },\n        add: function (re, mols, handler) {\n            if (_.isArray(re)) {\n                mols = re;\n                handler = mols;\n            }\n            if (_.isFunction(re)) {\n                \n                return false;\n            }\n            if (this.routes[re]) {\n                \n                return false;\n            }\n\n            this.routes[re] = {\n                modules: mols,\n                handler: handler || new Function()\n            };\n            return this;\n        },\n        remove: function (key) {\n            if (this.routes[key]){\n                delete this.routes[key];\n            }\n            return this;\n        },\n        flush: function () {\n            this.routes = {};\n            this.mode = null;\n            this.root = '/';\n            return this;\n        },\n        check: function (f) {\n            // 处理路径是否改变，默认改变\n            var diffPath = true;\n\n            var _path = app.url.getHashPath();\n            var _search = f ? app.url.getSearchObj(f) : app.url.getHashSearchObj();\n\n            if (f) {\n                diffPath = _path !== app.url.getHashPath(f);\n\n                if (diffPath) {\n                    if (this.cb) {\n                        this.cb(_path);\n                    }\n                }\n            }\n\n            app.control.load(this.routes[_path], _search, diffPath);\n            return this;\n        },\n        /**\n         * revise by Crow on 2014/12/18\n         * 将计时器改为 hashchange 事件监听\n         * */\n        listen: function () {\n            var self = app.route;\n            var current = app.url.getHash();\n\n            // 绑定前先检查当前路由\n            self.check('original');\n            window.onhashchange = function () {\n                if (current !== app.url.getHash()) {\n                    self.check(current);\n                    current = app.url.getHash();\n                }\n            };\n            return self;\n        },\n        navigate: function (path) {\n            path = path || '';\n            if (this.mode === 'history') {\n                window.history.pushState(null, null, this.root + this.clearSlashes(path));\n            } else {\n                window.location.href.match(/#(.*)$/);\n                window.location.href = window.location.href.replace(/#(.*)$/, '') + '#' + path;\n            }\n            this.check();\n            return this;\n        }\n    };\n\n    app.listen = app.route.listen;\n\n}(app));\n/**\n * @fileOverview 公共函数，没有依赖库\n * @author Crow\n * @version 0.0.1\n *\n * url:\n *\n *      window.location.href : 整个URL\n *      window.location.protocol : URL 协议\n *      window.location.host : URL的主机部分\n *      window.location.port : URL端口\n *      window.location.pathname : URL文件路径\n *      window.location.hash : 锚点\n */\n/*global window, quiCloud*/\n(function (win, app) {\n    'use strict';\n\n    var obj = {\n        'href': '',             //整个URL\n        'protocol': '',         //URL 协议\n        'host': '',             //URL的主机部分\n        'hostName': '',         //URL的主机名\n        'port': '',             //URL端口\n        'pathname': '',         //URL文件路径\n        'hash': '',             //锚点\n        'search': ''\n    };\n\n    app.url = app.url || {};\n\n    /**\n     * 获得当前完整的 URL\n     * @extends {Url}\n     * @returns {string|string}\n     */\n    app.url.getHref = function() {\n        return decodeURI(win.location.href) || '';\n    };\n\n    /**\n     * 获得当前 URL 的协议\n     * @extends {Url}\n     * @returns {string|string}\n     */\n    app.url.getProtocol = function() {\n        return decodeURI(win.location.protocol) || '';\n    };\n\n    /**\n     * 获得当前 URL 的主机名和端口号\n     * @extends {Url}\n     * @returns {string|string}\n     */\n    app.url.getHost = function() {\n        return decodeURI(win.location.host) || '';\n    }\n\n    /**\n     * 获得当前 URL 的主机名\n     * @extends {Url}\n     * @returns {string|string}\n     */\n    app.url.getHostName = function() {\n        return decodeURI(win.location.hostname) || '';\n    }\n\n    /**\n     * 获得当前 URL 的端口号\n     * @extends {Url}\n     * @returns {string|string}\n     */\n    app.url.getPort = function() {\n        return encodeURI(win.location.port) || '';\n    }\n\n    /**\n     * 获得当前 URL 的路径\n     * @extends {Url}\n     * @returns {string|string}\n     */\n    app.url.getPathname = function() {\n        return decodeURI(win.location.pathname) || '';\n    }\n\n    /**\n     * 获得当前 URL hash\n     * @extends {Url}\n     * @returns {string|string}\n     */\n    app.url.getHash = function() {\n        return decodeURI(win.location.hash) || '';\n    }\n\n    /**\n     * 获得当前 URL 的查询字串\n     * @extends {Url}\n     * @returns {string|string}\n     */\n    app.url.getSearch = function() {\n        return decodeURI(win.location.search) || '';\n    };\n\n    /**\n     * 获得当前 URL 的对象\n     * @extends {Url}\n     * @returns {{}}\n     */\n    app.url.getAll = function() {\n        var i = '',\n            o = {};\n\n        o = this.obj || {};\n\n        for (i in o) {\n            if (o.hasOwnProperty(i)) {\n                o[i] = win.location[i] || '';\n            }\n        }\n        return o;\n    };\n\n    /**\n     * 获得当前 URL 的 hash path\n     * @extends {Url}\n     * @returns {*}\n     */\n    app.url.getHashPath = function(str) {\n        var _hash = str || this.getHash(),\n            hashPath = null;\n\n        if (_hash) {\n            _hash = _hash.split('?')[0];\n            hashPath = _hash.replace('#', '');\n        } else {\n            hashPath = '';\n        }\n\n        return hashPath;\n    };\n\n    /**\n     * 获得当前 URL hash search的某一个值\n     * @extends {Url}\n     * @param key\n     * @returns {*}\n     */\n    app.url.getHashSearchObj = function(key) {\n        var hash = this.getHash(),\n            result = {},\n            arr = [];\n\n        var i, temp, search;\n\n        if (/\\?/.test(hash)) {\n            search = hash.split('?')[1];\n            arr = search.split('&');\n\n            for (i = 0; i < arr.length; i++) {\n                temp = arr[i].split('=');\n                if (key) {\n                    if (temp[0] === key) {\n                        result = temp[1];\n                        break;\n                    }\n                } else {\n                    result[temp[0]] = temp[1];\n                }\n            }\n        } else {\n            result = '';\n        }\n\n        return result;\n    };\n\n\n    app.url.getSearchObj = function (o) {\n        var hash = o,\n            result = {},\n            arr = [];\n\n        var i, temp, search;\n\n        if (/\\?/.test(hash)) {\n            search = hash.split('?')[1];\n            arr = search.split('&');\n\n            for (i = 0; i < arr.length; i++) {\n                temp = arr[i].split('=');\n                result[temp[0]] = temp[1];\n            }\n        } else {\n            result = '';\n        }\n\n        return result;\n    };\n\n    /**\n     * 设置当前 URL\n     * @extends {Url}\n     * @param str\n     */\n    app.url.setHref = function(str) {\n        win.location.href = encodeURI(str);\n    };\n\n    /**\n     * 设置当前 URL 协议\n     * @extends {Url}\n     * @param str\n     */\n    app.url.setProtocol = function(str) {\n        win.location.protocol = encodeURI(str);\n    };\n\n    app.url.setHost = function(str) {\n        win.location.host = encodeURI(str);\n    };\n\n    app.url.setHostName = function(str) {\n        win.location.hostname = encodeURI(str);\n    };\n\n    app.url.setPort = function(str) {\n        win.location.port = encodeURI(str);\n    };\n\n    app.url.setPathname = function(str) {\n        win.location.pathname = encodeURI(str);\n    };\n\n    app.url.setHash = function(str) {\n        win.location.hash = encodeURI(str);\n    };\n\n    app.url.setSearch = function(str) {\n        win.location.search = encodeURI(str);\n    };\n\n\n    /**\n     * 设置当前 URL hash search值\n     * @extends {Url}\n     * @param object\n     */\n    app.url.setHashSearch = function(object) {\n        var hashSearch = this.getHash(),\n            search = '',\n            hash = '',\n            obj = {},\n            i = 0,\n            key = null,\n            temp = null,\n            str = null,\n            arr = [],\n            hashArr = [];\n        if (/\\?/.test(hashSearch)) {\n            hashArr = hashSearch.split('?');\n            search = hashArr[1];\n            if (object.HASH) {\n                hash = object.HASH;\n                delete object.HASH;\n            } else {\n                hash = hashArr[0];\n            }\n\n\n            arr = search.split('&');\n\n            for (i = 0; i < arr.length; i++) {\n                temp = arr[i].split('=');\n                obj[temp[0]] = temp[1];\n            }\n            for (key in object) {\n                if (object.hasOwnProperty(key)) {\n                    obj[key] = object[key];\n                }\n            }\n            hash += '?';\n            for (str in obj) {\n                if (obj.hasOwnProperty(str)) {\n                    hash += (str + '=' + obj[str] + '&');\n                }\n            }\n            hash = hash.replace(/&$/, '');\n            app.url.setHash(hash);\n        } else {\n            if (object.HASH) {\n                hash = object.HASH;\n                delete object.HASH;\n            } else {\n                hash = hashSearch;\n            }\n\n            hash = hash + '?';\n            for (i in object) {\n                if (object.hasOwnProperty(i)) {\n                    hash = hash + i + '=' + object[i] + '&';\n                }\n            }\n            hash = hash.replace(/&$/, '');\n            app.url.setHash(hash);\n        }\n\n\n    };\n\n    app.url.delHashSearch = function(arg) {\n        var hashSearch = this.getHash(),\n            search = '',\n            hash = '',\n            obj = {},\n            i = 0,\n            key = null,\n            temp = null,\n            str = null,\n            arr = [],\n            hashArr = [];\n\n        hashArr = hashSearch.split('?');\n        search = hashArr[1];\n        hash = hashArr[0];\n        arr = search.split('&');\n\n        for (i = 0; i < arr.length; i++) {\n            temp = arr[i].split('=');\n            obj[temp[0]] = temp[1];\n        }\n\n        if (_.isArray(arg)) {\n            for (i = 0; i < arg.length; i++) {\n                if (obj[arg[i]]) {\n                    delete obj[arg[i]];\n                }\n            }\n        } else {\n            if (obj[arg]) {\n                delete obj[arg];\n            }\n        }\n        hash += '?';\n        for (str in obj) {\n            if (obj.hasOwnProperty(str)) {\n                hash += (str + '=' + obj[str] + '&');\n            }\n        }\n        hash = hash.replace(/&$/, '');\n        app.url.setHash(hash);\n    };\n\n\n    /**\n     * 格式化字符串url\n     * @param url\n     * @returns {{}}\n     */\n    app.url.parseUrl = function(url) {\n        var tmp, res = {},\n            p = null,\n            r = {\n                protocol: /([^\\/]+:)\\/\\/(.*)/i,\n                host: /(^[^\\:\\/]+)((?:\\/|:|$)?.*)/,\n                port: /\\:?([^\\/]*)(\\/?.*)/,\n                pathname: /([^\\?#]+)(\\??[^#]*)(#?.*)/\n            };\n        res.href = url;\n        for (p in r) {\n            if (r.hasOwnProperty(p)) {\n                tmp = r[p].exec(url);\n                res[p] = tmp ? tmp[1] : '';\n                url = tmp ? tmp[2] : '';\n                if (url === \"\") {\n                    url = \"/\";\n                }\n                if (p === \"pathname\") {\n                    res.pathname = tmp[1];\n                    res.search = tmp[2];\n                    res.hash = tmp[3];\n                }\n            }\n        }\n        return res;\n    };\n\n    /**\n     * 比较两个域名是否相同\n     * @param i {String}    url 必须是合理的url，或者只是pathname,eq: http://www.e.com/sdf\n     * @param j {String}    url 必须是合理的url，或者只是pathname, eq: /sdfs/asdf/sdf?sdfsdf=123。有host必须带有protocol\n     * @param m {boolean}   是否判断端口、和协议\n     * @returns {boolean}\n     */\n    app.url.isEqualHost = function(i, j, m) {\n        var b = true,\n            iO = parseUrl(i),\n            jO = parseUrl(j);\n\n        iO.protocol = iO.protocol || win.location.protocol;\n        iO.host = iO.host || win.location.host;\n        iO.port = iO.port || win.location.port;\n        jO.protocol = jO.protocol || win.location.protocol;\n        jO.host = jO.host || win.location.host;\n        jO.port = jO.port || win.location.port;\n\n        // 针对localhost 处理\n        if (iO.host === '127.0.0.1') {\n            iO.host = 'localhost';\n        }\n        if (jO.host === '127.0.0.1') {\n            iO.host = 'localhost';\n        }\n\n        // 是否判断端口\n        if (m) {\n            b = iO.protocol === jO.protocol && iO.host === jO.host && iO.port === jO.port;\n        } else {\n            b = iO.host === jO.host;\n        }\n\n        return b;\n    };\n\n}(window, app));\n/**\n * @fileOverview\n * @author Crow\n * @version 0.0.1\n * @time 2015/7/23\n */\n\n/*global window, jQuery, app*/\n(function (win, $, app) {\n    'use strict';\n\n    /**\n     * @description 本地储存\n     * @constructor\n     */\n    var Stg = function () {\n        this.cookieExpires = 30;\n        this.isHasLocalStorage = win.localStorage || false;\n    };\n\n    /**\n     * @description 增加数据\n     * @param key\n     * @param str   必须是字符串\n     */\n    Stg.prototype.add = function (key, str) {\n        if (this.isHasLocalStorage) {\n            win.localStorage.setItem(key, str);\n        } else {\n            // cookie 目前只是简单的存储30天\n            $.cookie(key, str, {expires: this.cookieExpires});\n        }\n    };\n\n    /**\n     * @description 目前根据key，获得数据\n     * @param key\n     * @return {*}\n     */\n    Stg.prototype.get = function (key) {\n        var result = null;\n        if (this.isHasLocalStorage) {\n            result = win.localStorage.getItem(key);\n        } else {\n            result = $.cookie(key);\n        }\n\n        // 处理 undefined\n        if (result === 'undefined') {\n            this.del(key);\n            result = null;\n        }\n\n        // TODO  临时处理\n        if (result == 'true' || result == 'false') {\n            return JSON.parse(result);\n        }\n        return result;\n    };\n\n    /**\n     * @description 目前根据key，删除数据\n     * @param key\n     */\n    Stg.prototype.del = function (key) {\n        if (this.isHasLocalStorage) {\n            win.localStorage.removeItem(key);\n        } else {\n            // cookie 暂时设置空，将在浏览器关闭时处理\n            $.cookie(key, '');\n        }\n    };\n\n    app.storage = new Stg();\n\n}(window, jQuery, app));"]}